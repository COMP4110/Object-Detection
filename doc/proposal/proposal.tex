% !TEX TS-program = pdflatex
% !TEX encoding = UTF-8 Unicode

% This is a simple template for a LaTeX document using the "article" class.
% See "book", "report", "letter" for other types of document.

% use larger type; default would be 10pt
\documentclass[11pt]{scrartcl}

% set input encoding (not needed with XeLaTeX)
\usepackage[utf8]{inputenc}
\usepackage[title,titletoc,header]{appendix}
\usepackage{multicol}
% \usepackage{titling}
\usepackage{longtable}

\usepackage{amsmath}
\usepackage{hyperref}

\usepackage{todonotes}
\presetkeys{todonotes}{inline}{}

\usepackage{natbib}
% To cite, use \citet{} in text citation, or \citep{} (in parentheses).

%%% PAGE DIMENSIONS
\usepackage[a4paper]{geometry} % to change the page dimensions
% \geometry{a4paper, margin=1.3in} % or letterpaper (US) or a5paper or....
% \geometry{margin=2in} % for example, change the margins to 2 inches all round
% \geometry{landscape} % set up the page for landscape
%   read geometry.pdf for detailed page layout information

\usepackage{graphicx} 				% support the \includegraphics command and options

% \usepackage[parfill]{parskip} % Activate to begin paragraphs with an empty line rather than an indent

%%% PACKAGES
\usepackage{booktabs} 				% for much better looking tables
\usepackage{array} 					% for better arrays (eg matrices) in maths
\usepackage{paralist} 				% very flexible & customisable lists (eg. enumerate/itemize, etc.)
\usepackage{verbatim} 				% adds environment for commenting out blocks of text & for better verbatim
\usepackage{subfig} 				% make it possible to include more than one captioned figure/table in a single float
\usepackage{float} 					% allow floating for figures

\usepackage{pgfgantt} 				% gantt charts
% \usepackage[export]{adjustbox}[2011/08/13] % For centering wide figures

%%% PARAGRAPHING & INDENTATION
\setlength{\parindent}{0pt}
\setlength{\parskip}{2ex plus 0.5ex minus 0.3ex}

%%% HEADERS & FOOTERS
\usepackage{fancyhdr} 				% This should be set AFTER setting up the page geometry
\pagestyle{fancy} 					% options: empty , plain , fancy
\renewcommand{\headrulewidth}{0pt} 	% customise the layout...
\lhead{}\chead{}\rhead{}
\lfoot{}\cfoot{\thepage}\rfoot{}

%%% SECTION TITLE APPEARANCE
\usepackage{sectsty}
\allsectionsfont{\sffamily\mdseries\upshape} % (See the fntguide.pdf for font help)
% (This matches ConTeXt defaults)

%%% TABLE OF CONTENTS APPEARANCE
 % Put the bibliography in the ToC
\usepackage[nottoc,notlof,notlot]{tocbibind}
 % Alter the style of the Table of Contents
\usepackage[titles,subfigure]{tocloft}
\renewcommand{\cftsecfont}{\rmfamily\mdseries\upshape}
 % No bold!
\renewcommand{\cftsecpagefont}{\rmfamily\mdseries\upshape}

\newcommand{\code}[1]{{\texttt{#1}}}
\newcommand{\libraryname}[1]{{\texttt{#1}}}
\newcommand{\codefile}[1]{{\textit{#1}}}
\newcommand{\program}[1]{\code{#1}}
\newcommand{\taskname}[1]{{\textit{#1}}}

% TODO: Catchy project title
\title{COMP4110 Project Proposal}
\subtitle{Fast detection of arbitrary balls for robot soccer}
% \subtitle{A 3D testing environment for an enhanced virtual reality system}
\author{ Brendan Annable, Mitchell Metcalfe, Monica Olejniczak }

% Activate to display a given date or no date (if empty), otherwise the current date is printed
\date{\today}

\rhead{COMP4110, Project Proposal, \today}

\begin{document}
	% \newgeometry{top=2cm}
	\maketitle
	% \vspace{-1.5 cm}
	% \restoregeometry

	\begin{abstract}
		
		
	\end{abstract}

	\newpage
	\tableofcontents
	\newpage


	\section{Summary} {

        % This project aims to detect spheres within an image, based on the
        % shading around its environment, and will have a heavy focus on
        % performance and accuracy. The results of this project will be utilised
        % by the Newcastle Robotics Laboratory and has the potential to impact
        % their results at RoboCup, an international robotic soccer competition.
        % This project is of significant interest to the robot soccer community
        % as the results of this could yield a more efficient method of real-
        % time ball detection, which is also beneficial to those who are
        % interested in ball detection within a competitive sports environment
        % such as basketball or tennis.
		
	}

	\section{Background and aims} {

  %       This project aims to develop methods for sphere detection in a RoboCup
  %       environment, placing an emphasis on performance due to the limited
  %       capabilities of the target platform. In particular, the performance is
  %       significantly effected by the number of pixel samples read from a
  %       given image and will be minimised. The project will focus on
  %       developing a novel, minimal, multi-stage scanning and ball-detection
  %       strategy that minimises the sampling effort while still correctly
  %       recognising all balls that are present in the image without false
  %       positives.

  %       An implementation of the developed approach will be created by
  %       extending the NUbotsâ€™ existing vision system, to minimise the effort
  %       required. The results will be compared to the ball detection method
  %       used in their current vision system and to other competing ball
  %       detection techniques, with a heavy focus on performance and accuracy.
  %       If a robust approach is found, it could be generalised to detect other
  %       shapes such as robots, lines and goals based on a set of features.

  %       It is also possible to utilise the information gathered from previous
  %       frames, or from the robot platform itself, including the expected
  %       position, velocity and kinematics horizon.

  		Keeping track of a ball is a natural and fundamental aspect of playing 
  		soccer, that many human players would not consider to be a skill in itself. 
  		However, while it may come naturally to humans, fast and reliable ball
        tracking has presented a challenge that has attracted much research in
        the robot soccer community.
        
        \todo { 
            Refer to the progression of ball detection techniques from colour based to
            shape based and intensity based.

            Describe our approach as a natural
            next step.

            Add references here.
        }

        Early attempts at ball detection at RoboCup simply used histogramming
        techniques targeted at a specific range of colour intensities to find
        a coloured ball. As the RoboCup playing field became less structured,
        teams have increasingly implemented methods that detect the shape of
        the ball as well.
        \citet{schulz2007ball} used a neural network on
        subsampled luminance images of the ball to detect the shape of the 
        ball. Recent approaches have focused on detecting the approximately
        circular shape of the ball in typical images. These include
        clustering, hough filters, and RANSAC.

        \todo {
            Make a note about colour classification: 

            "The preprocessing step of colour classification using a precalculated
            lookup table has become standard in the Standard Platform and Kid Size
            leagues."
        }

        Many current ball detection methods make assumptions about the ball or
        the environment that limit their applicability elsewhere. Methods
        based on colour classification or similarity can suffer from false
        positives due to other objects having similar colours. These methods may 
        also detect both false positives and false negatives due to unexpected changes
        in lighting. Methods based on circle or ellipse detection can be effected by
        false positives due to the presence of disk-like objects in the
        environment, or due to objects that appear circular when viewed from
        specific angles.

        \todo {
            Posit the circular appearance of disk-like objects as the worst
            case for current ball-detection methods.
        }

        \todo {
            % This may be unrelated enough that we can just not mention it.

            Note the success of trajectory estimation in helping rule out
            false positives in ball detection for automated annotation of
            sports footage, but indicate that this technique alone is not
            enough to filter out all (non-spherical) false positives (e.g. a
            stationary disk will follow a valid trajectory for a ball).

			Indicate that we would like an algorithm that also works on single images.

            Also note that some methods attempt to gain accuracy by attempting
            only to recognise a specific ball (e.g. the paper that used patch
            descriptors to try and match the pattern on a given soccer ball).
        }

        \todo {
            Hypothesise that 3D features of a sphere should be enough to
            distinguish them from other round objects.

            (for the common, but important case of spheres resting on a ground
            plane, that are primarily lit from above.)
        }

        To avoid the limitations 

		For simplicity, the scope of the proposed project is limited
        to the common and important case of detecting balls that are resting
        on the ground. It can also be assumed that lights are always above the ball
        and results in a shadow being cast from the ball.

        \todo { 
            Hypothesise that spatial relationships between separate 3D features (e.g.
            specular highlight, shadow, shading gradient, the projected ellipse)
            should help to identify spheres, as they have helped in detecting faces.
        }

        \todo {

            Hypothesise that local feature/patch descriptors should be enough
            to identify the specular highlight and shadow cast by a sphere.

        }

        \todo { 
            Contrast the goal of our proposed project with the focus of most other
            algorithms, which generally do not attempt to verify that they have not
            erroneously detected disks.
        }

        As a result of targeting our approach toward the 3D features that
        distinguish spheres from objects such as disks, we expect our method
        to be particularly robust against detecting false positives.

	}

	\section{Project plan} {

        \todo {
            Outline the tendency of ball and face detection approaches to use a
            coarse/cheap candidate detection pass and a more accurate/costly
            verification/outlier rejection pass, and propose that we follow the
            same approach and investigate one or two alternatives (Hough
            transform, \citet{Yuan2015} or \citet{Pan2011}, a more ad-hoc
            method?) and compare results - possibly by leveraging the NUbots'
            existing system.
        }

        \todo {
            Propose that we evaluate and compare a number of methods for the
            verification stage (i.e. the stage that differentiates between spheres
            and disks), and list at least two methods for doing so (SVMs, CNNs,
            KNNs, Decision forests, Adaboost?). Indicate that we should
            investigate simple input representations/transformations that might
            help to make these methods more effective (e.g. Fourier transforms,
            wavelets, local binary descriptors, patch descriptors, Haar-like
            features).
        }

        \todo {
            Outline how the methods proposed will be evaluated and compared, with
            reference to any expected difficulties.
        }

        \subsection{Image dataset creation} {

        	The creation of the dataset will be built by the research team, removing
        	the need for purchasing which eliminates any copyright and production
        	issues that could otherwise occur. This also enables the team to
        	create a consistent dataset.

        	The images will be taken using a \textbf{SOME CAMERA} with varying
        	lighting conditions and environments to ensure a diverse dataset is
        	obtained. These photographs will be compressed using a high quality
        	format so that they are easier to process than the original without
        	losing much, if any, information.

        	Some images will also be duplicated and altered in a photo editing
        	program. These modifications may change the quality of the image, its
        	lighting environment or apply some transformation and will be used for
        	the purpose of testing the same image under different conditions.

        	The dataset will contain images of spheres and disks that are composed
        	in different ways. To begin with, the images should contain an 
        	individual ball or disk and then progress to having both or a
        	combination of within the same image to test if our methods of detection
        	are able to identify multiple spheres correctly. 

        	More complex images may feature:

        	\begin{itemize}
        		\item Objects that appear as spheres from different angles. 
        		\item Spheres that intersect with each other.
        		\item Disks that intersect with each other.
        		\item A sphere and disk that intersect with each other.
        		\item A sphere or disk that is rotated.
        		\item A sphere or disk that is partially cropped out.
        	\end{itemize}

        	A robot soccer field will be the primary environment for the dataset,
        	but will undergo several lighting conditions when compiling the
        	images. This will enable the sphere detection methods to be tested with
        	a diverse range of data. The proposed lighting environments include:

        	\begin{itemize}
        		\item The lighting is under normal conditions.
        		\item The lighting has a primarily red hue.
        		\item The lighting has a primarily green hue.
        		\item The lighting has a primarily blue hue.
        		\item The lighting has a primarily yellow hue.
        		\item The lighting has a primarily magenta hue.
        		\item The lighting has a primarily cyan hue.
        		\item The lighting is dim.
        		\begin{itemize}
        			\item The shadow of the ball should blend with the environment.
        		\end{itemize}
        		\item The lighting is bright.
        		\begin{itemize}
        			\item The lighting of the ball should blend with the environment.
        		\end{itemize}
        	\end{itemize}

            \todo {
                Describe how we will obtain a collection of spheres, what the 
                collection might contain, how we will select environments and 
                lighting conditions, and how we will take the photos 
                (include a specification of the camera + image quality that will be used).
            }

            \todo {
                Indicate whether/how we will label the dataset
            }

            To reduce the complexity of this project, the dataset will not contain
            images of moving balls.

            \todo {
                Indicate how we might augment the dataset with transformed
                images, etc.
            }

            \todo {
                Indicate whether images of non spherical objects will appear
                in the dataset, which objects will be selected for inclusion,
                and how the images will be obtained.
            }

            \todo {
                Propose that (aspheric) deflated balls be imaged in addition
                to (spherical) inflated balls
            }
        }

	}

	\section{Project schedule} {

        \todo {
            Propose a timeline containing presentation preparation, dataset
            collection, candidate selection development, classifier development,
            detection performance testing, analysis of results, report
            preparation, and final presentation preparation.
        }

		\begin{figure}[H]
	        \makebox[\textwidth][c]{\resizebox{0.95\paperwidth}{!}{\input{proposal_gantt.tex}}}
			\caption[Project Schedule] {
                A Gantt chart illustrating the planned project schedule.
                Patterned grey bars represent optional tasks.
                \todo {
                    Fill in the Gantt chart
                }
			}
			\label{gantt:proposal}
		\end{figure}

	}

	\section{Roles and responsibilities} {

		Each researcher is to develop a different candidate detection and
		verfication method so that all combinations can be tested on the 
		proposed dataset. They are all responsible for committing a set 
		amount of hours to this project, to ensure that it adheres to its
		schedule and the milestones do not then become delayed.

        \todo {

        	Give a summary of the role, responsibility and contributions of the 
        	chief investigators.

        	Summarise the roles and levels of involvement of all other participants
        	such as technical staff, research associates, collaborators and other
			personnel.

			Explain how you make sure that you have the capacity and time to 
			undertake the proposed project.

        }

    }

    \section{Communication of results} {

        The results of the project will be compiled into a report, as outlined
        in the project schedule, that is intended to be suitable for
        submission to a relevant conference or journal. In the case that the
        report is accepted for publication, the dataset created for the
        project will also be made available online.
        
    }

	\bibliography{bibliography}
	\bibliographystyle{apalike}

\end{document}

